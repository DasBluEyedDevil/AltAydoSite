---
phase: 07-cleanup-decommission
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - public/data/ships.json
  - src/lib/ship-data.ts
  - src/types/ShipData.ts
  - src/types/test-dedup.js
  - src/components/fleet-ops/mission-planner/MissionComposer.tsx
  - src/components/fleet-ops/mission-planner/MissionComposerModal.tsx
  - src/components/fleet-ops/mission-planner/MissionForm.tsx
  - src/components/fleet-ops/mission-planner/TestShipImages.tsx
  - src/components/mission/ShipImage.tsx
  - public/assets/ship-placeholder.png
autonomous: true

must_haves:
  truths:
    - "public/data/ships.json does not exist in the repository"
    - "src/lib/ship-data.ts does not exist"
    - "src/types/ShipData.ts does not exist"
    - "No dead mission planner components remain in the codebase"
    - "public/assets/ship-placeholder.png does not exist"
    - "TypeScript type-check passes with zero errors from deleted files"
  artifacts:
    - path: "public/data/ships.json"
      provides: "DELETED -- must not exist"
    - path: "src/lib/ship-data.ts"
      provides: "DELETED -- must not exist"
    - path: "src/types/ShipData.ts"
      provides: "DELETED -- must not exist"
    - path: "src/types/test-dedup.js"
      provides: "DELETED -- must not exist"
    - path: "src/components/fleet-ops/mission-planner/TestShipImages.tsx"
      provides: "DELETED -- must not exist"
    - path: "src/components/fleet-ops/mission-planner/MissionForm.tsx"
      provides: "DELETED -- must not exist"
    - path: "src/components/fleet-ops/mission-planner/MissionComposer.tsx"
      provides: "DELETED -- must not exist"
    - path: "src/components/fleet-ops/mission-planner/MissionComposerModal.tsx"
      provides: "DELETED -- must not exist"
    - path: "src/components/mission/ShipImage.tsx"
      provides: "DELETED -- must not exist"
    - path: "public/assets/ship-placeholder.png"
      provides: "DELETED -- must not exist"
  key_links:
    - from: "all src/ files"
      to: "deleted files"
      via: "no remaining imports"
      pattern: "zero grep matches for deleted file paths"
---

<objective>
Delete all legacy ship system files and dead code components from the codebase.

Purpose: With Plan 01 having severed all import dependencies from live code to legacy files, these files can now be safely deleted. This fulfills requirements CLN-01 (ships.json removed), CLN-02 (ship-data.ts removed), CLN-03 (ShipData.ts removed), and CLN-04 (legacy image helpers removed). Dead code components that were never rewired during Phase 6 (MissionComposer chain, MissionForm, TestShipImages, ShipImage) are also removed.

Output: 10 files deleted. The codebase has zero legacy ship system files and zero dead mission planner components.
</objective>

<execution_context>
@C:\Users\dasbl\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dasbl\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-cleanup-decommission/07-CONTEXT.md
@.planning/phases/07-cleanup-decommission/07-RESEARCH.md
@.planning/phases/07-cleanup-decommission/07-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete legacy core files and static data</name>
  <files>
    public/data/ships.json
    src/lib/ship-data.ts
    src/types/ShipData.ts
    src/types/test-dedup.js
    public/assets/ship-placeholder.png
  </files>
  <action>
Create a pre-cleanup git tag before any deletions (user deferred this to Claude's discretion; given 10 files being deleted, a tag is warranted):

```bash
git tag pre-phase7-cleanup
```

Then delete the following files using `rm` or `git rm`:

1. **`public/data/ships.json`** -- Static ship database replaced by MongoDB. This is the canonical legacy data file (CLN-01).

2. **`src/lib/ship-data.ts`** -- Contains `loadShipDatabase()`, `getShipDatabaseSync()`, `isShipDatabaseLoaded()`, `clearShipCache()`. All callers were cleaned in Plan 01 (CLN-02).

3. **`src/types/ShipData.ts`** -- Contains `ShipDetails`, `Ship`, `ShipManufacturer`, `formatShipImageName()`, `getShipImagePath()`, `getDirectImagePath()`, `shipManufacturers[]`, `MANUFACTURERS`, and 8+ other functions. All 535 lines superseded by `src/types/ship.ts` and `src/lib/ships/` modules (CLN-03, CLN-04).

4. **`src/types/test-dedup.js`** -- Test script for finding duplicate ship names in old static data. No longer relevant.

5. **`public/assets/ship-placeholder.png`** -- Local placeholder image. All references replaced with CSS empty states in Plan 01.

Commit these deletions with message: `cleanup(07): remove legacy ship data files and placeholder image`
  </action>
  <verify>
Verify each file no longer exists:
```bash
test ! -f public/data/ships.json && echo "PASS" || echo "FAIL"
test ! -f src/lib/ship-data.ts && echo "PASS" || echo "FAIL"
test ! -f src/types/ShipData.ts && echo "PASS" || echo "FAIL"
test ! -f src/types/test-dedup.js && echo "PASS" || echo "FAIL"
test ! -f public/assets/ship-placeholder.png && echo "PASS" || echo "FAIL"
```
All should print PASS. Run `npm run type-check` -- should pass with zero errors referencing deleted files.
  </verify>
  <done>
All 5 legacy core files are deleted. The pre-phase7-cleanup git tag exists for rollback if needed. TypeScript type-check passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Delete dead code components (unreachable mission planner chain)</name>
  <files>
    src/components/fleet-ops/mission-planner/MissionComposer.tsx
    src/components/fleet-ops/mission-planner/MissionComposerModal.tsx
    src/components/fleet-ops/mission-planner/MissionForm.tsx
    src/components/fleet-ops/mission-planner/TestShipImages.tsx
    src/components/mission/ShipImage.tsx
  </files>
  <action>
These 5 components are dead code -- verified during planning:

- **MissionComposerModal.tsx** -- Not imported by any file in the codebase. It wraps MissionComposer.
- **MissionComposer.tsx** -- Only imported by MissionComposerModal (dead). Imports from ShipData.ts and ship-data.ts.
- **MissionForm.tsx** (fleet-ops version) -- Not imported by any file. Imports from ShipData.ts. This is the OLD mission form, NOT `MissionPlannerForm.tsx` (which is the live Phase 6 version used by the dashboard MissionPlanner).
- **TestShipImages.tsx** -- Test utility for old ship image system. Imports ShipData.ts and ship-data.ts.
- **ShipImage.tsx** (mission/) -- Only imported by MissionComposer.tsx (dead). Uses `resolveShipImageLegacy`.

Before deleting, do a final confirmation grep to ensure none of these are imported by any live code:
```bash
grep -r "MissionComposerModal" src/ --include="*.ts" --include="*.tsx" | grep -v "MissionComposerModal.tsx"
grep -r "from.*MissionComposer['\"]" src/ --include="*.ts" --include="*.tsx" | grep -v "MissionComposer.tsx" | grep -v "MissionComposerModal.tsx"
grep -r "from.*MissionForm['\"]" src/ --include="*.ts" --include="*.tsx" | grep -v "MissionForm.tsx"
grep -r "TestShipImages" src/ --include="*.ts" --include="*.tsx" | grep -v "TestShipImages.tsx"
grep -r "from.*mission/ShipImage" src/ --include="*.ts" --include="*.tsx" | grep -v "ShipImage.tsx"
```

If any grep returns matches from live files, DO NOT delete that component -- instead clean its legacy imports. This is a safety check.

If all greps return zero matches (expected), delete all 5 files and commit: `cleanup(07): remove dead mission planner components and ShipImage`

IMPORTANT: Do NOT delete `src/components/dashboard/MissionPlanner.tsx` -- that is the LIVE mission planner used by the `/dashboard/mission-planner` route. Do NOT delete `src/components/dashboard/MissionPlannerForm.tsx` -- that is the LIVE form component. Only delete the fleet-ops versions and the mission/ShipImage component.
  </action>
  <verify>
Verify each file no longer exists:
```bash
test ! -f src/components/fleet-ops/mission-planner/MissionComposer.tsx && echo "PASS" || echo "FAIL"
test ! -f src/components/fleet-ops/mission-planner/MissionComposerModal.tsx && echo "PASS" || echo "FAIL"
test ! -f src/components/fleet-ops/mission-planner/MissionForm.tsx && echo "PASS" || echo "FAIL"
test ! -f src/components/fleet-ops/mission-planner/TestShipImages.tsx && echo "PASS" || echo "FAIL"
test ! -f src/components/mission/ShipImage.tsx && echo "PASS" || echo "FAIL"
```
All should print PASS. Run `npm run type-check` -- should pass.

Verify the live mission planner still exists:
```bash
test -f src/components/dashboard/MissionPlanner.tsx && echo "PASS: Live MissionPlanner exists" || echo "FAIL"
test -f src/components/dashboard/MissionPlannerForm.tsx && echo "PASS: Live MissionPlannerForm exists" || echo "FAIL"
```
  </verify>
  <done>
All 5 dead code components are deleted. The live mission planner (dashboard/MissionPlanner.tsx and dashboard/MissionPlannerForm.tsx) remains intact. TypeScript type-check passes.
  </done>
</task>

</tasks>

<verification>
```bash
# Comprehensive file existence check
echo "=== File deletion verification ==="
for f in \
  "public/data/ships.json" \
  "src/lib/ship-data.ts" \
  "src/types/ShipData.ts" \
  "src/types/test-dedup.js" \
  "public/assets/ship-placeholder.png" \
  "src/components/fleet-ops/mission-planner/MissionComposer.tsx" \
  "src/components/fleet-ops/mission-planner/MissionComposerModal.tsx" \
  "src/components/fleet-ops/mission-planner/MissionForm.tsx" \
  "src/components/fleet-ops/mission-planner/TestShipImages.tsx" \
  "src/components/mission/ShipImage.tsx"; do
  test ! -f "$f" && echo "PASS: $f deleted" || echo "FAIL: $f still exists"
done

# Live files still exist
echo "=== Live file verification ==="
test -f src/components/dashboard/MissionPlanner.tsx && echo "PASS: Live MissionPlanner" || echo "FAIL"
test -f src/components/dashboard/MissionPlannerForm.tsx && echo "PASS: Live MissionPlannerForm" || echo "FAIL"
test -f src/lib/ships/image.ts && echo "PASS: image.ts (new)" || echo "FAIL"
test -f src/types/ship.ts && echo "PASS: ship.ts (new)" || echo "FAIL"

# Type check
npm run type-check
```
</verification>

<success_criteria>
- All 10 files listed in must_haves are deleted from the filesystem
- Pre-cleanup git tag exists (`git tag -l pre-phase7-cleanup`)
- Live mission planner files (dashboard/MissionPlanner.tsx, dashboard/MissionPlannerForm.tsx) still exist
- New ship system files (lib/ships/image.ts, types/ship.ts) still exist
- `npm run type-check` passes
- Two incremental commits: one for core legacy files, one for dead components
</success_criteria>

<output>
After completion, create `.planning/phases/07-cleanup-decommission/07-02-SUMMARY.md`
</output>
