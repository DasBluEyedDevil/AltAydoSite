---
phase: 05-ship-browse-and-display
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/components/ships/ShipCard.tsx
  - src/components/ships/ShipCardList.tsx
  - src/components/ships/ShipGrid.tsx
autonomous: true

must_haves:
  truths:
    - "Ship cards display name, store image, manufacturer, role/classification at a glance"
    - "Grid view shows image-heavy responsive cards"
    - "List view shows compact horizontal rows with small thumbnails"
    - "User can toggle between grid and list views"
    - "Cards use MobiGlas theme styling consistently"
  artifacts:
    - path: "src/components/ships/ShipCard.tsx"
      provides: "Individual ship card for grid view"
      min_lines: 40
    - path: "src/components/ships/ShipCardList.tsx"
      provides: "Individual ship row for list view"
      min_lines: 30
    - path: "src/components/ships/ShipGrid.tsx"
      provides: "Grid/list container with view toggle and loading skeletons"
      min_lines: 60
  key_links:
    - from: "src/components/ships/ShipCard.tsx"
      to: "@/lib/ships/image"
      via: "resolveShipImage for card image"
      pattern: "resolveShipImage"
    - from: "src/components/ships/ShipGrid.tsx"
      to: "src/components/ships/ShipCard.tsx"
      via: "renders ShipCard in grid mode"
      pattern: "ShipCard"
    - from: "src/components/ships/ShipGrid.tsx"
      to: "src/components/ships/ShipCardList.tsx"
      via: "renders ShipCardList in list mode"
      pattern: "ShipCardList"
---

<objective>
Build the ship card components and grid/list view container. These are the core display components that render ship data from the API in two switchable layouts.

Purpose: Users need to browse ships visually. The grid view provides an image-heavy browsable experience while the list view provides a compact scannable format. Both show the same essential info: ship name, store image, manufacturer, and role/classification.

Output: Three components -- ShipCard (grid), ShipCardList (list row), ShipGrid (container with view toggle).
</objective>

<execution_context>
@C:\Users\dasbl\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dasbl\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/05-ship-browse-and-display/05-RESEARCH.md
@.planning/phases/05-ship-browse-and-display/05-01-SUMMARY.md

Key source files:
@src/types/ship.ts (ShipDocument interface)
@src/lib/ships/image.ts (resolveShipImage, ShipImageView)
@src/lib/ships/format.ts (formatProductionStatus, formatSize -- from Plan 01)
@src/components/ui/mobiglas/MobiGlasPanel.tsx (panel component for card containers)
@src/components/ui/mobiglas/MobiGlasButton.tsx (button component for view toggle)
</context>

<tasks>

<task type="auto">
  <name>Task 1: ShipCard and ShipCardList components</name>
  <files>
    src/components/ships/ShipCard.tsx
    src/components/ships/ShipCardList.tsx
  </files>
  <action>
    Create src/components/ships/ShipCard.tsx (grid view card):
    - 'use client' directive
    - Props: `{ ship: ShipDocument; onClick: (ship: ShipDocument) => void; }`
    - Use MobiGlasPanel with variant="dark", cornerAccents={true}, cornerSize="sm", padding="sm"
    - Image section: fixed aspect ratio container (aspect-[16/9]), use Next/Image with `resolveShipImage(ship.images, 'store')`, fill mode, object-cover, lazy loading, sizes="(max-width: 768px) 100vw, (max-width: 1200px) 33vw, 25vw"
    - Add `onError` handler on Image that swaps src to `/assets/ship-placeholder.png`
    - Below image, show:
      - Ship name: text-[rgba(var(--mg-primary),0.9)] font-quantify text-sm truncate
      - Manufacturer name: text-[rgba(var(--mg-text),0.6)] text-xs
      - Classification label: inline badge with bg-[rgba(var(--mg-primary),0.1)] border border-[rgba(var(--mg-primary),0.2)] text-[rgba(var(--mg-primary),0.7)] text-xs px-1.5 py-0.5 rounded-sm
    - Entire card is clickable (onClick handler on the MobiGlasPanel wrapper)
    - Hover effect: use motion.div wrapper with whileHover={{ scale: 1.02 }} and cursor-pointer
    - Use Framer Motion for entry animation: initial={{ opacity: 0, y: 10 }}, animate={{ opacity: 1, y: 0 }}

    Create src/components/ships/ShipCardList.tsx (list view row):
    - 'use client' directive
    - Props: `{ ship: ShipDocument; onClick: (ship: ShipDocument) => void; }`
    - Horizontal flex row with: small thumbnail (64x40px or w-16 h-10 relative), ship name, manufacturer, classification badge
    - Thumbnail uses Next/Image with resolveShipImage(ship.images, 'store'), fill, object-cover
    - Add onError handler for placeholder fallback
    - Row styling: flex items-center gap-3 p-2 border-b border-[rgba(var(--mg-primary),0.1)] hover:bg-[rgba(var(--mg-primary),0.05)] cursor-pointer transition-colors
    - Ship name: text-[rgba(var(--mg-primary),0.9)] text-sm font-quantify flex-1 min-w-0 truncate
    - Manufacturer: text-[rgba(var(--mg-text),0.6)] text-xs w-32 truncate (fixed width for alignment)
    - Classification badge: same styling as grid card badge
    - Entire row clickable via onClick
    - Motion entry animation: initial={{ opacity: 0, x: -10 }}, animate={{ opacity: 1, x: 0 }}

    Both components: import Image from 'next/image', import { resolveShipImage } from '@/lib/ships/image', import ShipDocument from '@/types/ship', import motion from 'framer-motion'.
  </action>
  <verify>
    Run `npm run type-check` -- no errors in new component files.
    Verify both components accept ShipDocument prop and render ship.name, ship.manufacturer.name, ship.classificationLabel.
  </verify>
  <done>
    ShipCard renders an image-heavy card with ship name, store image, manufacturer, and classification badge. ShipCardList renders a compact horizontal row with the same data. Both handle image errors with placeholder fallback.
  </done>
</task>

<task type="auto">
  <name>Task 2: ShipGrid container with view toggle and loading skeletons</name>
  <files>src/components/ships/ShipGrid.tsx</files>
  <action>
    Create src/components/ships/ShipGrid.tsx:
    - 'use client' directive
    - Props: `{ ships: ShipDocument[]; isLoading: boolean; viewMode: 'grid' | 'list'; onViewModeChange: (mode: 'grid' | 'list') => void; onShipClick: (ship: ShipDocument) => void; }`
    - View toggle header: flex row with result info area (left) and two MobiGlasButton (ghost variant, size sm) for grid/list icons (right)
      - Grid icon: use Heroicons Squares2X2Icon (from @heroicons/react/24/outline)
      - List icon: use Heroicons ListBulletIcon (from @heroicons/react/24/outline)
      - Active view button gets variant="outline" styling, inactive gets variant="ghost"
    - Grid mode: CSS grid with `grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4`
      - Render ShipCard for each ship
    - List mode: flex flex-col with MobiGlasPanel variant="dark" wrapper
      - Render ShipCardList for each ship
    - Loading state: when isLoading=true, show skeleton placeholders
      - Grid mode: 24 skeleton cards (matching pageSize) with animate-pulse, aspect-[16/9] bg-[rgba(var(--mg-primary),0.08)] plus two text placeholder bars
      - List mode: 24 skeleton rows with animate-pulse, h-12 bg-[rgba(var(--mg-primary),0.05)]
    - Empty state: when ships.length === 0 and not loading, show centered message:
      - Icon: MagnifyingGlassIcon from Heroicons, 48px, text-[rgba(var(--mg-primary),0.4)]
      - Text: "No ships found" in text-[rgba(var(--mg-text),0.6)]
      - Subtext: "Try adjusting your filters or search terms" in text-[rgba(var(--mg-text),0.4)] text-sm
    - Use AnimatePresence + motion.div with layout for smooth transitions between grid/list modes
    - Key each ship by ship.fleetyardsId for proper React reconciliation
  </action>
  <verify>
    Run `npm run type-check` -- no errors in ShipGrid.tsx.
    Verify ShipGrid imports ShipCard and ShipCardList correctly.
  </verify>
  <done>
    ShipGrid renders ships in switchable grid/list layouts with loading skeletons, empty state, and smooth view transitions. View toggle buttons use MobiGlas styling.
  </done>
</task>

</tasks>

<verification>
- `npm run type-check` passes with zero errors
- ShipCard, ShipCardList, ShipGrid are all 'use client' components
- All ship images use resolveShipImage() (never direct URL access or legacy functions)
- MobiGlas components used for panels and buttons (not raw divs with inline MobiGlas styles)
- All colors reference CSS variables via rgba(var(--mg-*)) pattern
</verification>

<success_criteria>
- ShipCard shows ship name, store image, manufacturer name, classification badge
- ShipCardList shows same info in compact row format
- ShipGrid toggles between grid (responsive columns) and list (vertical rows) layouts
- Loading state shows 24 skeleton placeholders
- Empty state shows helpful message
- Image errors fall back to placeholder
</success_criteria>

<output>
After completion, create `.planning/phases/05-ship-browse-and-display/05-02-SUMMARY.md`
</output>
