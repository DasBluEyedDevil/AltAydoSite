---
phase: 05.1-ship-browse-gaps
plan: 02
type: execute
wave: 2
depends_on: ["05.1-01"]
files_modified:
  - src/components/ships/ShipCard.tsx
  - src/components/ships/ShipCardList.tsx
  - src/components/ships/ShipDetailPanel.tsx
  - src/components/ships/ShipFilterPanel.tsx
autonomous: true

must_haves:
  truths:
    - "Ship cards in grid view show crew, cargo, and speed specs below the classification badge"
    - "Ship cards in list view show crew, cargo, and speed as additional columns"
    - "Manufacturer logo renders as a small image next to manufacturer name when logo URL exists"
    - "When manufacturer logo is null (~76% of manufacturers), text-only display remains unchanged"
  artifacts:
    - path: "src/components/ships/ShipCard.tsx"
      provides: "Grid card with manufacturer logo and spec row"
      contains: "formatCrew"
    - path: "src/components/ships/ShipCardList.tsx"
      provides: "List row with manufacturer logo and spec columns"
      contains: "formatCargo"
    - path: "src/components/ships/ShipDetailPanel.tsx"
      provides: "Detail panel with manufacturer logo next to code badge"
      contains: "manufacturer.logo"
    - path: "src/components/ships/ShipFilterPanel.tsx"
      provides: "Filter dropdown ManufacturerOption includes logo"
      contains: "logo"
  key_links:
    - from: "src/components/ships/ShipCard.tsx"
      to: "@/lib/ships/format"
      via: "import formatCrew, formatCargo, formatSpeed"
      pattern: "import.*formatCrew.*formatCargo.*formatSpeed"
    - from: "src/components/ships/ShipCard.tsx"
      to: "ship.manufacturer.logo"
      via: "conditional Image render"
      pattern: "ship\\.manufacturer\\.logo"
    - from: "src/components/ships/ShipCardList.tsx"
      to: "@/lib/ships/format"
      via: "import formatCrew, formatCargo, formatSpeed"
      pattern: "import.*formatCrew.*formatCargo.*formatSpeed"
    - from: "src/components/ships/ShipDetailPanel.tsx"
      to: "ship.manufacturer.logo"
      via: "conditional Image render in manufacturer bar"
      pattern: "ship\\.manufacturer\\.logo"
---

<objective>
Wire manufacturer logos and ship specs into all card and detail UI components, closing both verification gaps (UI-04 and UI-05).

Purpose: Users should see key specs (crew, cargo, speed) on ship cards at a glance without opening the detail panel, and manufacturer logos should appear wherever manufacturer info is displayed (when a logo URL exists).

Output: Updated ShipCard, ShipCardList, ShipDetailPanel, and ShipFilterPanel components with logo rendering and spec display.
</objective>

<execution_context>
@C:\Users\dasbl\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dasbl\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05.1-ship-browse-gaps/05.1-RESEARCH.md
@.planning/phases/05.1-ship-browse-gaps/05.1-01-SUMMARY.md
@src/components/ships/ShipCard.tsx
@src/components/ships/ShipCardList.tsx
@src/components/ships/ShipDetailPanel.tsx
@src/components/ships/ShipFilterPanel.tsx
@src/lib/ships/format.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add specs and logo to ShipCard and ShipCardList</name>
  <files>
    src/components/ships/ShipCard.tsx
    src/components/ships/ShipCardList.tsx
  </files>
  <action>
    **ShipCard.tsx (grid view):**

    1. Add import: `import { formatCrew, formatCargo, formatSpeed } from '@/lib/ships/format';`

    2. In the manufacturer line (currently `<p>` with `ship.manufacturer.name`), replace with a flex row that conditionally shows the logo image before the name:
       ```
       <div className="flex items-center gap-1.5">
         {ship.manufacturer.logo ? (
           <Image
             src={ship.manufacturer.logo}
             alt={ship.manufacturer.name}
             width={16}
             height={16}
             className="object-contain flex-shrink-0"
           />
         ) : null}
         <span className="text-[rgba(var(--mg-text),0.6)] text-xs truncate">
           {ship.manufacturer.name}
         </span>
       </div>
       ```

    3. After the classification badge (the `{ship.classificationLabel && ...}` block), add a compact specs row:
       ```
       <div className="flex items-center gap-2 text-[rgba(var(--mg-text),0.5)] text-xs mt-1">
         <span title="Crew">{formatCrew(ship.crew.min, ship.crew.max)}</span>
         <span className="text-[rgba(var(--mg-primary),0.2)]">|</span>
         <span title="Cargo">{formatCargo(ship.cargo)}</span>
         <span className="text-[rgba(var(--mg-primary),0.2)]">|</span>
         <span title="SCM Speed">{formatSpeed(ship.scmSpeed)}</span>
       </div>
       ```

    **ShipCardList.tsx (list view):**

    1. Add import: `import { formatCrew, formatCargo, formatSpeed } from '@/lib/ships/format';`

    2. In the manufacturer span, add conditional logo before the name text. Replace the existing manufacturer `<span>` with:
       ```
       <span className="text-[rgba(var(--mg-text),0.6)] text-xs w-32 truncate hidden sm:flex items-center gap-1.5">
         {ship.manufacturer.logo ? (
           <Image
             src={ship.manufacturer.logo}
             alt={ship.manufacturer.name}
             width={14}
             height={14}
             className="object-contain flex-shrink-0"
           />
         ) : null}
         <span className="truncate">{ship.manufacturer.name}</span>
       </span>
       ```

    3. After the manufacturer span (before the classification badge), add three spec columns:
       ```
       <span className="text-[rgba(var(--mg-text),0.5)] text-xs w-12 text-right hidden md:block" title="Crew">
         {formatCrew(ship.crew.min, ship.crew.max)}
       </span>
       <span className="text-[rgba(var(--mg-text),0.5)] text-xs w-16 text-right hidden lg:block" title="Cargo">
         {formatCargo(ship.cargo)}
       </span>
       <span className="text-[rgba(var(--mg-text),0.5)] text-xs w-16 text-right hidden lg:block" title="Speed">
         {formatSpeed(ship.scmSpeed)}
       </span>
       ```
       These use responsive breakpoints: crew visible on md+, cargo and speed on lg+.

    IMPORTANT: The `Image` component from `next/image` is already imported in both files. Do NOT add a duplicate import.

    Style guidance:
    - Logo images: 16px in grid, 14px in list (small enough to not dominate)
    - Specs text: text-xs with muted color (0.5 opacity) so they are secondary to ship name
    - Separators in grid card: pipe characters with very low opacity (0.2)
    - List spec columns: right-aligned with fixed widths, hidden on small screens
  </action>
  <verify>
    Run `npm run type-check` and confirm zero errors. Grep both files for `formatCrew` and `manufacturer.logo` to confirm wiring.
  </verify>
  <done>
    ShipCard shows manufacturer logo (when available) plus crew/cargo/speed specs below the classification badge. ShipCardList shows manufacturer logo plus crew/cargo/speed as additional responsive columns. Both gracefully handle null logos (show text only).
  </done>
</task>

<task type="auto">
  <name>Task 2: Add logo to ShipDetailPanel and ShipFilterPanel</name>
  <files>
    src/components/ships/ShipDetailPanel.tsx
    src/components/ships/ShipFilterPanel.tsx
  </files>
  <action>
    **ShipDetailPanel.tsx:**

    1. Add `import Image from 'next/image';` at the top (it is NOT currently imported in this file).

    2. In the Manufacturer + Status Bar section (lines 176-193), add a conditional logo image before the manufacturer code badge. The current structure is a flex row with code badge, name, and status. Insert the logo at the start:
       ```
       <div className="flex items-center gap-3 px-4 pb-2">
         {ship.manufacturer.logo ? (
           <Image
             src={ship.manufacturer.logo}
             alt={ship.manufacturer.name}
             width={20}
             height={20}
             className="object-contain flex-shrink-0"
           />
         ) : null}
         <span className="bg-[rgba(var(--mg-primary),0.1)] text-[rgba(var(--mg-primary),0.8)] px-2 py-0.5 text-xs font-mono rounded-sm">
           {ship.manufacturer.code}
         </span>
         ... (rest unchanged)
       ```
       The logo is 20px in the detail panel (slightly larger than cards since there is more room).

    **ShipFilterPanel.tsx:**

    1. Update the ManufacturerOption interface (lines 19-24) to include logo:
       ```
       interface ManufacturerOption {
         name: string;
         code: string;
         slug: string;
         logo: string | null;
         shipCount: number;
       }
       ```
       This matches the updated ManufacturerInfo type from the API response. The logo field will now be available in the manufacturers state, though it is not rendered in the HTML `<select>` dropdown (native select elements cannot display images). The interface update ensures type correctness when the API returns the logo field.

    NOTE: Do NOT attempt to render logo images inside native `<option>` elements -- HTML `<select>` does not support embedded images. The ManufacturerOption interface is updated purely for type alignment with the API response. A future enhancement could replace the native select with a custom dropdown that shows logos, but that is out of scope for this gap closure.
  </action>
  <verify>
    Run `npm run type-check` and confirm zero errors. Grep ShipDetailPanel for `manufacturer.logo` and `Image` import. Grep ShipFilterPanel for `logo: string | null`.
  </verify>
  <done>
    ShipDetailPanel shows manufacturer logo (when available) at 20px next to the code badge in the manufacturer bar. ShipFilterPanel ManufacturerOption type includes logo for API compatibility. Type-check passes.
  </done>
</task>

</tasks>

<verification>
1. `npm run type-check` passes with zero errors
2. All 4 UI components updated:
   - ShipCard.tsx: has formatCrew/formatCargo/formatSpeed imports AND manufacturer.logo conditional render
   - ShipCardList.tsx: has formatCrew/formatCargo/formatSpeed imports AND manufacturer.logo conditional render
   - ShipDetailPanel.tsx: has Image import AND manufacturer.logo conditional render
   - ShipFilterPanel.tsx: ManufacturerOption has logo field
3. Spec display uses existing format utilities (no new formatting logic)
4. Logo rendering uses conditional `{logo ? <Image .../> : null}` pattern (no broken images when null)
5. All styles use MobiGlas rgba(var(--mg-*)) conventions
</verification>

<success_criteria>
- Ship cards (grid) show crew, cargo, and speed below the classification badge
- Ship cards (list) show crew, cargo, and speed as responsive columns
- Manufacturer logo appears as a small image next to manufacturer name/code wherever manufacturer info is displayed (when logo URL is non-null)
- When logo is null, display degrades gracefully to text-only (existing behavior)
- TypeScript type-check passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-ship-browse-gaps/05.1-02-SUMMARY.md`
</output>
