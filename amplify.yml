version: 1
backend:
  phases:
    # preBuild, build, postBuild phases for the backend
    # Amplify automatically handles deploying changes in the 'amplify' folder (like your resource.ts)
    # during these backend phases if it detects any.
    # You usually don't need to add explicit 'npx ampx deploy' commands here.
    build:
      commands:
      # Example: if you had backend tests or other checks
      # - npm run backend-test
frontend:
  phases:
    preBuild:
      commands:
        - npm ci # Or yarn install, pnpm install
    build:
      commands:
        - npm run build # Or your framework's build command (e.g., next build)
  artifacts:
    baseDirectory: .next # Or dist, build, out, depending on your framework
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*